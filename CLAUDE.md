
# CLAUDE.md

注意点は[README.md](./README.md)に書いてあるので、そちらを参照してください。
途中のメッセージの出力は英語じゃなく日本語で書いてください。

## 高品質なプロダクトを生み出すための開発指針

### 1. コード品質の維持

- **リンターとタイプチェッカーの活用**: 変更を加えた後は必ず `npm run lint` と `npm run typecheck` を実行し、エラーがないことを確認する
- **テストの実行**: 機能追加や修正後は関連するテストを実行し、既存の機能が壊れていないことを確認する
- **コードレビューの観点**:
  - 可読性が高く、意図が明確なコードを書く
  - 適切な変数名と関数名を使用する
  - DRY原則に従い、重複を避ける

### 2. セキュリティベストプラクティス

- **認証情報の管理**:
  - ハードコードされたパスワードや秘密鍵は絶対に使用しない
  - 環境変数や Rails credentials を使用して機密情報を管理する
- **入力検証**: ユーザー入力は必ず検証し、SQLインジェクションやXSSを防ぐ
- **最小権限の原則**: 必要最小限の権限でコードを実行する

### 3. パフォーマンスの最適化

- **データベースクエリ**:
  - N+1問題を避けるため、includes や eager loading を活用する
  - 適切なインデックスを設定する
- **キャッシング**: 頻繁にアクセスされるデータは適切にキャッシュする
- **非同期処理**: 重い処理は Active Job を使用してバックグラウンドで実行する

### 4. 開発プロセス

- **段階的な実装**: 大きな機能は小さなタスクに分割して実装する
- **早期のフィードバック**: 早い段階でプロトタイプを作成し、フィードバックを得る
- **継続的な改善**: リファクタリングを定期的に行い、技術的負債を減らす

### 5. ドキュメントとコミュニケーション

- **コード内コメント**: 複雑なロジックには適切なコメントを追加する
- **コミットメッセージ**: 変更の意図が明確に伝わるメッセージを書く
- **API ドキュメント**: エンドポイントの仕様を明確に文書化する

### 6. Rails 特有のベストプラクティス

- **RESTful な設計**: Rails の規約に従った RESTful な API 設計を心がける
- **Strong Parameters**: mass assignment 脆弱性を防ぐため、必ず strong parameters を使用する
- **マイグレーション**: データベースの変更は必ずマイグレーションで管理し、rollback 可能にする
- **環境ごとの設定**: development, test, production 環境それぞれに適切な設定を行う

### 7. フロントエンド開発

- **TypeScript の活用**: 型安全性を確保し、実行時エラーを減らす
- **コンポーネント設計**: 再利用可能で疎結合なコンポーネントを作成する
- **アクセシビリティ**: WCAG ガイドラインに従い、すべてのユーザーが使いやすい UI を作る

これらの指針に従うことで、保守性が高く、スケーラブルで、セキュアなプロダクトを開発することができます。
